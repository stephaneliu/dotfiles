# support for osx, all others don't symlink

platform=`uname`

# bind vi key-mapping
  set -g status-keys vi
#vi-style controls for copy mode
  setw -g mode-keys vi

if-shell "uname | grep -q Darwin" "source-file $HOME/.tmux-osx.conf"
if-shell "uname | grep -q Linux" "source-file $HOME/.tmux-rh.conf"

# use CTRL-A as modifier
  set-option -g prefix C-f
  unbind C-b

# Support for 256 colors
  set -g default-terminal "screen-256color"

# Force zsh
  set-option -g default-shell $SHELL

# Prevent panes from closing when error occurs
# Allow reading error message to fix issue
# set-option -g remain-on-exit on

# Remap x to kill pane without confirmation
  unbind C-x
  bind C-X kill-pane
  bind x kill-pane

# Window index base 1
  set -g base-index 1
  set-window-option -g pane-base-index 1
  set-option -g renumber-windows on

# Set status bar
  set-window-option -g window-status-current-style bg=color17
  set-window-option -g window-status-current-style fg=color27
  # use vim script github.com/guns/xterm-color-table.vim' for color code
  # yes you must use color
  set -g status-bg color16
  set -g status-fg white
  set -g status-left '#[fg=color15,bg=color17]#H'
  set -g status-right '#[fg=color15,bg=color17]#(uptime | cut -d"," -f 2-)'
  set -g status-interval 2
  set -g message-command-style fg=blue
  set -g message-command-style bg=color16

  # Options removed in 2.0 (tmux -Version)
  # setw -g window-status-content-attr bold,blink,reverse

  # large history
  set-option -g history-limit 100000

# pane border
  set -g pane-border-style fg=color244
  set -g pane-active-border-style fg=color208,bg=default

# highlight status bar on activity
  setw -g monitor-activity on
  set -g visual-activity on
  set -g visual-bell on

# automatically set window title
  set -g automatic-rename off
  set -g allow-rename off

# decrease command delay
  set -sg escape-time 1

######## Bindings ########
  # <ctrl>-a twice for last-window
  bind C-f last-window
  unbind f
  bind-key f last-pane

# new windows with current dir path
  unbind c
  bind c new-window -c "#{pane_current_path}"

# Quick gitsh pane
  # unbind C-g
  # bind g split-window -v -c "#{pane_current_path}" -p 50 "gitsh --git $(which gh)"
  # bind C-g split-window -v -c "#{pane_current_path}" -p 50 "gitsh --git $(which git)"

# Quick rails console pane
  unbind C-r
  bind C-r split-window -v -c "#{pane_current_path}" -p 50 "bin/rails console"

# split windows like vim.  - Note: vim's definition of a horizontal/vertical split is reversed from tmux's
  unbind s
  bind s split-window -v -c "#{pane_current_path}"\; resize-pane -y 35%
  bind C-s split-window -v -c "#{pane_current_path}"\; resize-pane -y 35%
  bind v split-window -h -c "#{pane_current_path}" \; resize-pane -x 38%
  bind C-v split-window -h -c "#{pane_current_path}" \; resize-pane -x 38%

  # navigate panes with hjkl
  bind h select-pane -L
  bind C-h select-pane -L
  bind j select-pane -D
  bind C-j select-pane -D
  bind k select-pane -U
  bind C-k select-pane -U
  bind l select-pane -R
  bind C-l select-pane -R

  bind C-H select-pane -L \; resize-pane -R 1000
  bind C-J select-pane -D \; resize-pane -y 35%
  bind C-K select-pane -U \; resize-pane -D 1000
  bind C-L select-pane -R \; resize-pane -x 38%

  # resize panes like vim
  # -r option makes it repeatable
  bind -r H resize-pane -L 5
  bind -r J resize-pane -D 5
  bind -r K resize-pane -U 5
  bind -r L resize-pane -R 5

  unbind =
  bind _ resize-pane -D 1000
  bind C-_ resize-pane -U 1000
  bind = resize-pane -y 50
  bind | resize-pane -R 1000

  # Reset panes to custom layout
  unbind C-c
  bind C-c select-layout "3854,240x84,0,0{148x84,0,0[148x82,0,0,0,148x1,0,83,3],91x84,149,0[91x30,149,0,4,91x22,149,31,5,91x30,149,54,6]}"

# bind : to command-prompt like vim this is the default in tmux already
  bind : command-prompt
  # bind R source-file ~/.tmux.conf

# COLOR Solarized darK
# default statusbar colors
set-option -g status-bg black #base02
set-option -g status-fg yellow #yellow
set-option -g status-style default

# default window title colors
set-window-option -g window-status-style fg=brightblue
set-window-option -g window-status-style bg=default
#set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-style fg=brightred
set-window-option -g window-status-current-style bg=default
#set-window-option -g window-status-current-attr bright

# message text
set-option -g message-style bg=black
set-option -g message-style fg=brightred

# pane number display
set-option -g display-panes-active-color blue #blue
set-option -g display-panes-color brightred #orange

# clock
set-window-option -g clock-mode-color green #green

# enable mouse to drag panes
set-option -g mouse

# List of plugins
# install: prefix + I
# update: prefix + U
# uninstall: prefix + alt + u
# set -g @plugin 'tmux-plugins/tpm'
# Sensible tmux settings without override of custom configurations
# set -g @plugin 'tmux-plugins/tmux-sensible'

# Persist tmux session through reboots by saving to file
# Save: prefix + Ctrl-s
# Restore: prefix + Ctrl-r
# set -g @plugin 'tmux-plugins/tmux-resurrect'
# set -g @resurrect-strategy-vim 'session'


# Init tmux plugin manager (keep this line at the very bottom)
# run '~/.tmux/plugins/tpm/tpm'
